import{_ as S}from"./PageContainer-BiMsqkyX.js";import{r as m,u as V,a as k,o as y,c as U,b as l,d as r,g as _,b$ as x,E as R}from"./index-C2RHDhMo.js";import{a as C,E as F}from"./el-col--SY5Mvgs.js";import{E as N,a as $}from"./el-form-item-ByoRGwta.js";import{E as q}from"./_plugin-vue_export-helper-D454ASWf.js";import{E as B}from"./el-input-5AdgkQG3.js";/* empty css                   */import"./_baseClone-bknzmvu0.js";const J={__name:"UserPassword",setup(I){const o=m({old_pwd:"",new_pwd:"",re_pwd:""}),i={old_pwd:[{required:!0,message:"请输入原密码",trigger:"blur"},{pattern:/^\S{6,15}$/,message:"密码长度必须是6-15位的非空字符串",trigger:"blur"}],new_pwd:[{required:!0,message:"请输入新密码",trigger:"blur"},{pattern:/^\S{6,15}$/,message:"密码长度必须是6-15位的非空字符串",trigger:"blur"},{validator:(d,e,t)=>{e===o.value.old_pwd?t(new Error("原密码和新密码不能一样!")):t()},trigger:"blur"}],re_pwd:[{required:!0,message:"请再次确认新密码",trigger:"blur"},{pattern:/^\S{6,15}$/,message:"密码长度必须是6-15位的非空字符串",trigger:"blur"},{validator:(d,e,t)=>{e!==o.value.new_pwd?t(new Error("新密码和确认再次输入的新密码不一样!")):t()},trigger:"blur"}]},u=m(),n=V(),w=k(),c=async()=>{await u.value.validate(),await x(o.value),R.success("密码修改成功"),n.setToken(""),n.setUser({}),w.push("/login")},f=()=>{u.value.resetFields()};return(d,e)=>{const t=B,s=N,p=q,g=$,v=C,b=F,E=S;return y(),U(E,{title:"修改密码"},{default:l(()=>[r(b,null,{default:l(()=>[r(v,{span:12},{default:l(()=>[r(g,{model:o.value,rules:i,ref_key:"formRef",ref:u,"label-width":"150px",class:"pwd-form",size:"large"},{default:l(()=>[r(s,{label:"原密码",prop:"old_pwd"},{default:l(()=>[r(t,{modelValue:o.value.old_pwd,"onUpdate:modelValue":e[0]||(e[0]=a=>o.value.old_pwd=a),type:"password"},null,8,["modelValue"])]),_:1}),r(s,{label:"新密码",prop:"new_pwd"},{default:l(()=>[r(t,{modelValue:o.value.new_pwd,"onUpdate:modelValue":e[1]||(e[1]=a=>o.value.new_pwd=a),type:"password"},null,8,["modelValue"])]),_:1}),r(s,{label:"确认密码",prop:"re_pwd"},{default:l(()=>[r(t,{modelValue:o.value.re_pwd,"onUpdate:modelValue":e[2]||(e[2]=a=>o.value.re_pwd=a),type:"password"},null,8,["modelValue"])]),_:1}),r(s,null,{default:l(()=>[r(p,{type:"primary",onClick:c},{default:l(()=>e[3]||(e[3]=[_("修改密码")])),_:1}),r(p,{onClick:f},{default:l(()=>e[4]||(e[4]=[_("重置")])),_:1})]),_:1})]),_:1},8,["model"])]),_:1})]),_:1})]),_:1})}}};export{J as default};
